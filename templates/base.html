<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}LandVista{% endblock %}</title>
    {% set canonical_base = (seo_defaults.canonical_base_url if seo_defaults and seo_defaults.canonical_base_url else request.url_root.rstrip('/')) %}
    <meta name="description" content="{% block meta_description %}{{ seo_defaults.default_description if seo_defaults else 'LandVista Properties Limited - verified land investment opportunities across Kenya.' }}{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}{{ seo_defaults.default_keywords if seo_defaults else 'land investment, kenya properties, verified plots' }}{% endblock %}">
    <meta name="robots" content="{% block meta_robots %}index,follow{% endblock %}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="canonical" href="{% block canonical_url %}{{ canonical_base ~ request.path }}{% endblock %}">
    <meta property="og:type" content="{% block og_type %}website{% endblock %}">
    <meta property="og:title" content="{% block og_title %}{% block seo_title %}LandVista Properties Limited{% endblock %}{% endblock %}">
    <meta property="og:description" content="{% block og_description %}{{ seo_defaults.default_description if seo_defaults else 'LandVista Properties Limited - verified land investment opportunities across Kenya.' }}{% endblock %}">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:image" content="{% block og_image %}{{ seo_defaults.default_og_image if seo_defaults else '/static/images/landvista-logo.png' }}{% endblock %}">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{% block twitter_title %}LandVista Properties Limited{% endblock %}">
    <meta name="twitter:description" content="{% block twitter_description %}{{ seo_defaults.default_description if seo_defaults else 'LandVista Properties Limited - verified land investment opportunities across Kenya.' }}{% endblock %}">
    <meta name="twitter:image" content="{% block twitter_image %}{{ seo_defaults.default_og_image if seo_defaults else '/static/images/landvista-logo.png' }}{% endblock %}">
    {% if seo_defaults and seo_defaults.twitter_handle %}
    <meta name="twitter:site" content="{{ seo_defaults.twitter_handle }}">
    {% endif %}
    {% if seo_defaults and seo_defaults.google_verification %}
    <meta name="google-site-verification" content="{{ seo_defaults.google_verification }}">
    {% endif %}
    {% if seo_defaults and seo_defaults.bing_verification %}
    <meta name="msvalidate.01" content="{{ seo_defaults.bing_verification }}">
    {% endif %}
    {% block extra_meta %}{% endblock %}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Sora:wght@600;700&display=swap" rel="stylesheet">

    <!-- MAIN STYLES -->
    <link rel="stylesheet"
          href="{{ url_for('static', filename='css/style.css') }}">
    {% block extra_css %}{% endblock %}

    <!-- FONT AWESOME -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "RealEstateAgent",
      "name": "{{ (seo_defaults.site_name if seo_defaults else 'LandVista Properties Limited')|e }}",
      "url": "{{ request.url_root.rstrip('/') }}",
      "telephone": "+254784666927",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "KE"
      }
    }
    </script>
</head>

<body class="{% block body_class %}{% endblock %}">
<a href="#main-content" class="skip-link">Skip to main content</a>

<!-- =========================
     TOP INFO BAR (FIXED)
========================= -->
<div class="top-bar">
    <div class="top-left">
        <a href="tel:+254784666927" class="phone-link">
            <i class="fas fa-phone"></i>
            Phone <strong>0784 666 927</strong>
        </a>
    </div>

    <div class="top-right opening-hours">
        <span>Monday - Friday</span>
        <span>9:00 AM - 6:00 PM</span>
    </div>
</div>

<!-- =========================
     NAVBAR
========================= -->
<header class="navbar">
    <div class="nav-container">
        <a href="/home" class="brand-link" aria-label="LandVista Home">
            <img src="{{ url_for('static', filename='images/landvista-logo.png') }}"
                 class="logo" alt="LandVista Logo">
        </a>
        <button class="nav-toggle" id="navToggle" type="button" aria-expanded="false" aria-controls="siteNav" aria-label="Toggle navigation">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <nav class="site-nav" id="siteNav">
            <a href="/home" class="nav-link">Home</a>
            <a href="/about" class="nav-link">About Us</a>
            <div class="nav-dropdown">
                <a href="/properties" class="dropdown-toggle nav-link">Properties <i class="fas fa-chevron-down"></i></a>
                <div class="dropdown-menu">
                    <a href="/properties?status=available">For Sale Lands</a>
                    <a href="/properties?status=sold">Sold Out</a>
                </div>
            </div>
            <a href="/news" class="nav-link">News & Blogs</a>
            <a href="/contact" class="nav-link">Contact Us</a>
            <a href="/contact" class="nav-cta">Book Site Visit</a>
        </nav>
    </div>
</header>

<!-- =========================
     PAGE CONTENT
========================= -->
<main id="main-content">
{% block content %}{% endblock %}
</main>

<!-- =========================
     WHATSAPP FLOATING BUTTON
========================= -->
<a href="https://wa.me/254784666927?text=Hello%20Landvista%20Properties%20Limited"
   target="_blank"
   rel="noopener noreferrer"
   class="whatsapp-float"
   title="Chat with LandVista Properties Limited">
    <i class="fab fa-whatsapp"></i>
</a>
<button class="scroll-top-btn" id="scrollTopBtn" type="button" aria-label="Back to top">
    <i class="fas fa-arrow-up"></i>
</button>

<!-- =========================
     FOOTER
========================= -->
<footer class="footer-main footer-v2">
    <div class="footer-v2-inner">
        <div class="footer-v2-top">
            <div class="footer-v2-brand">
                <img src="{{ url_for('static', filename='images/landvista-logo.png') }}" class="footer-logo" alt="LandVista Logo">
                <p>LandVista helps buyers and investors secure verified land opportunities across Kenya with clear guidance and transparent processes.</p>
                <div class="footer-v2-badges">
                    <span><i class="fas fa-shield-check"></i> Verified listings</span>
                    <span><i class="fas fa-file-signature"></i> Documentation support</span>
                    <span><i class="fas fa-headset"></i> Advisory team</span>
                </div>
            </div>

            <div class="footer-v2-links">
                <h4>Explore</h4>
                <a href="/home">Home</a>
                <a href="/about">About</a>
                <a href="/properties">Properties</a>
                <a href="/news">News & Blogs</a>
                <a href="/legal-guides">Legal Guides</a>
            </div>

            <div class="footer-v2-links">
                <h4>Resources</h4>
                <a href="/contact">Contact</a>
                <a href="/privacy-policy">Privacy Policy</a>
                <a href="/terms-of-service">Terms of Service</a>
                <a href="/terms-of-use">Terms of Use</a>
                <a href="/admin/login">Admin Portal</a>
            </div>

            <div class="footer-v2-contact">
                <h4>Contact</h4>
                <a href="tel:+254784666927"><i class="fas fa-phone"></i> +254 784 666 927</a>
                <a href="mailto:info@landvistaproperties.com"><i class="fas fa-envelope"></i> info@landvistaproperties.com</a>
                <p><i class="fas fa-map-marker-alt"></i> Devkesh House, 2nd Floor, Room F05</p>
                <div class="footer-social">
                    <a href="https://www.facebook.com/landvistaproperties" target="_blank" rel="noopener noreferrer"><i class="fab fa-facebook"></i></a>
                    <a href="https://www.instagram.com/landvistaproperties" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram"></i></a>
                    <a href="https://wa.me/254784666927" target="_blank" rel="noopener noreferrer"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>

            <div class="footer-v2-newsletter">
                <h4>Weekly Investment Insights</h4>
                <p>Get market updates, legal tips, and new project alerts.</p>
                <form id="footerNewsletterForm">
                    <input type="email" name="email" placeholder="Email address" required>
                    <button type="submit">Subscribe</button>
                </form>
                <p id="footerNewsletterMsg" class="footer-newsletter-msg"></p>
            </div>
        </div>

        <div class="footer-v2-trust">
            <div><i class="fas fa-check-circle"></i> Title verification guidance</div>
            <div><i class="fas fa-road"></i> Strategic growth locations</div>
            <div><i class="fas fa-handshake"></i> Transparent transaction support</div>
            <div><i class="fas fa-chart-line"></i> Investment-first advisory model</div>
        </div>

        <div class="footer-v2-bottom">
            <p>&copy; 2026 LandVista Properties Limited. All rights reserved.</p>
            <div class="footer-legal">
                <a href="/privacy-policy">Privacy Policy</a>
                <a href="/terms-of-service">Terms</a>
                <a href="/contact">Support</a>
            </div>
        </div>
    </div>
</footer>

<script>
    // Load TinyMCE only on pages that actually have rich text fields.
    (function() {
        if (!document.querySelector('textarea.rich-text')) return;

        const script = document.createElement('script');
        script.src = 'https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js';
        script.referrerPolicy = 'origin';
        script.onload = function() {
            if (!window.tinymce) return;
            tinymce.init({
                selector: 'textarea.rich-text',
                menubar: false,
                plugins: 'lists link image table code advlist',
                toolbar: 'undo redo | bold italic underline | fontsizeselect | fontselect | alignleft aligncenter alignright | bullist numlist | link image | code',
                toolbar_mode: 'wrap',
                branding: false,
                height: 320,
                forced_root_block: '',
                fontsize_formats: '8px 10px 12px 14px 16px 18px 20px 24px 28px 36px',
                content_style: 'body { font-family: "Manrope", "Segoe UI", Arial, sans-serif; font-size:14px }'
            });
        };
        document.head.appendChild(script);
    })();
</script>

{% block socket_script %}{% endblock %}
<script defer src="{{ url_for('static', filename='js/main.js') }}"></script>
{% block extra_js %}{% endblock %}

</body>
</html>
