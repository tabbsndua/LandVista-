{% extends "base.html" %}

{% block title %}Home | LandVista Properties Limited{% endblock %}
{% block meta_description %}Discover verified land investment opportunities in Kenya with LandVista. Browse strategic locations, due diligence support, and flexible payment plans.{% endblock %}
{% block meta_keywords %}land for sale kenya, kenya land investment, verified plots kenya, landvista properties{% endblock %}
{% block body_class %}home-modern-body{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/home-modern.css') }}">
{% endblock %}

{% block content %}
<div class="home-modern">
    <section class="modern-hero" id="top">
        <div class="hero-noise"></div>
        <div class="hero-gradient-orb hero-gradient-orb-a"></div>
        <div class="hero-gradient-orb hero-gradient-orb-b"></div>

        <div class="modern-hero-inner">
            <div class="hero-copy reveal" data-reveal>
                <p class="hero-eyebrow">Verified Land Investments</p>
                <h1>Acquire strategic land opportunities with confidence and speed.</h1>
                <p class="hero-lead">
                    LandVista combines legal due diligence, trusted support, and flexible payment planning so you can invest without uncertainty.
                </p>
                <form id="heroPropertySearchForm" class="hero-search-form" aria-label="Property search">
                    <input type="search" id="heroSearchInput" name="q" placeholder="Search by location, project, or keyword" autocomplete="off">
                    <select id="heroSearchStatus" name="status">
                        <option value="">All status</option>
                        <option value="available">Available</option>
                        <option value="sold">Sold</option>
                    </select>
                    <button type="submit">Search Properties</button>
                </form>
                <div class="hero-actions">
                    <a href="/properties" class="hero-btn hero-btn-primary">Browse Available Plots</a>
                    <button class="hero-btn hero-btn-ghost" type="button" data-modal-open="consultationModal">Get Investment Plan</button>
                </div>
                <div class="hero-badges">
                    <span><i class="fas fa-shield-alt"></i> Verified Titles</span>
                    <span><i class="fas fa-route"></i> Prime Access Roads</span>
                    <span><i class="fas fa-hand-holding-usd"></i> Flexible Installments</span>
                </div>
            </div>

            <div class="hero-glass-card reveal" data-reveal data-reveal-delay="120">
                <p class="glass-label">Investment Snapshot</p>
                <h3>Why investors choose LandVista</h3>
                <div class="hero-stats-mini">
                    <div>
                        <strong>98%</strong>
                        <span>Client satisfaction</span>
                    </div>
                    <div>
                        <strong>20+</strong>
                        <span>Acres listed</span>
                    </div>
                    <div>
                        <strong>15+</strong>
                        <span>Properties sold</span>
                    </div>
                </div>
                <p class="hero-note">Built for first-time buyers and serious land investors.</p>
            </div>
        </div>
    </section>

    <section class="section-shell trust-strip reveal" data-reveal>
        <div class="trust-chip"><i class="fas fa-file-contract"></i> Clean Documentation</div>
        <div class="trust-chip"><i class="fas fa-user-shield"></i> Advisory Support</div>
        <div class="trust-chip"><i class="fas fa-map"></i> Strategic Locations</div>
        <div class="trust-chip"><i class="fas fa-wallet"></i> Flexible Payment Plans</div>
        <div class="trust-chip"><i class="fas fa-headset"></i> Fast Response Team</div>
    </section>

    <section class="section-shell hero-listing-strip">
        <div class="section-header reveal" data-reveal>
            <p class="section-tag">Quick Access</p>
            <h2>Top listings right from the homepage.</h2>
            <p class="section-subcopy">Browse verified opportunities immediately without scrolling through the full page.</p>
        </div>
        <div class="hero-listing-grid reveal" data-reveal>
            {% for p in properties[:3] %}
            <article class="hero-listing-card glass-card">
                <h3>{{ p.title }}</h3>
                <p><i class="fas fa-map-marker-alt"></i> {{ p.location }}</p>
                <div class="hero-listing-meta">
                    <strong>KSh {{ "{:,}".format((p.price or 0)|int) }}</strong>
                    <span>{{ p.area or 'Flexible size' }}</span>
                </div>
                <a href="/properties/{{ p._id }}">View Details</a>
            </article>
            {% endfor %}
        </div>
    </section>

    <section class="section-shell modern-feature-section">
        <div class="section-header reveal" data-reveal>
            <p class="section-tag">Core Value</p>
            <h2>More than listings. A full investment support system.</h2>
        </div>
        <div class="feature-grid">
            <article class="feature-card glass-card reveal" data-reveal>
                <i class="fas fa-file-signature"></i>
                <h3>Legal-First Verification</h3>
                <p>Every property is screened for title authenticity, ownership clarity, and legal readiness before publication.</p>
            </article>
            <article class="feature-card glass-card reveal" data-reveal data-reveal-delay="100">
                <i class="fas fa-map-marked-alt"></i>
                <h3>Growth-Focused Locations</h3>
                <p>Access emerging corridors with strong infrastructure trends and long-term appreciation potential.</p>
            </article>
            <article class="feature-card glass-card reveal" data-reveal data-reveal-delay="180">
                <i class="fas fa-user-tie"></i>
                <h3>Dedicated Advisor Support</h3>
                <p>From first inquiry to transfer completion, our team guides each stage of your purchase journey.</p>
            </article>
            <article class="feature-card glass-card reveal" data-reveal data-reveal-delay="260">
                <i class="fas fa-wallet"></i>
                <h3>Structured Payment Flexibility</h3>
                <p>Choose payment options tailored to your timeline while maintaining clarity on each installment milestone.</p>
            </article>
        </div>
    </section>

    <section class="section-shell modern-process-section">
        <div class="section-header reveal" data-reveal>
            <p class="section-tag">Simple Process</p>
            <h2>How LandVista gets you from interest to ownership.</h2>
        </div>
        <div class="process-grid">
            <div class="process-step reveal" data-reveal>
                <span>01</span>
                <h3>Discover</h3>
                <p>Review verified listings filtered by location, budget, and land use goals.</p>
            </div>
            <div class="process-step reveal" data-reveal data-reveal-delay="110">
                <span>02</span>
                <h3>Validate</h3>
                <p>Book a site visit and confirm details with our advisory team before commitment.</p>
            </div>
            <div class="process-step reveal" data-reveal data-reveal-delay="220">
                <span>03</span>
                <h3>Secure</h3>
                <p>Finalize payment and documentation with transparent guidance at each step.</p>
            </div>
            <div class="process-step reveal" data-reveal data-reveal-delay="330">
                <span>04</span>
                <h3>Own</h3>
                <p>Complete transfer and receive support post-purchase as your investment grows.</p>
            </div>
        </div>
    </section>

    <section class="section-shell market-insights-section">
        <div class="section-header reveal" data-reveal>
            <p class="section-tag">Market Insights</p>
            <h2>High-potential investment zones to watch in 2026.</h2>
        </div>
        <div class="insights-grid">
            <article class="insight-card reveal" data-reveal>
                <h3>Juja Belt</h3>
                <p>University-driven demand and expanding access roads continue to attract high-volume buyers.</p>
                <strong>Trend: Strong mid-term growth</strong>
            </article>
            <article class="insight-card reveal" data-reveal data-reveal-delay="110">
                <h3>Matuu Corridor</h3>
                <p>Infrastructure upgrades and affordable entry points are creating a favorable investor mix.</p>
                <strong>Trend: Value appreciation pockets</strong>
            </article>
            <article class="insight-card reveal" data-reveal data-reveal-delay="220">
                <h3>Kivandini Region</h3>
                <p>Improved connectivity and utility expansion support long-term residential development use cases.</p>
                <strong>Trend: Long-hold upside</strong>
            </article>
        </div>
    </section>

    <section class="section-shell comparison-section">
        <div class="section-header reveal" data-reveal>
            <p class="section-tag">Planning Support</p>
            <h2>Compare strategies before selecting a plot.</h2>
        </div>
        <div class="comparison-table-wrap reveal" data-reveal>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Strategy</th>
                        <th>Best For</th>
                        <th>Typical Timeline</th>
                        <th>Risk Level</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Buy and Hold</td>
                        <td>Long-term investors</td>
                        <td>3 - 8 years</td>
                        <td>Low to Medium</td>
                    </tr>
                    <tr>
                        <td>Installment Build Plan</td>
                        <td>Income planning buyers</td>
                        <td>1 - 4 years</td>
                        <td>Medium</td>
                    </tr>
                    <tr>
                        <td>Speculative Growth Zone</td>
                        <td>High-upside seekers</td>
                        <td>2 - 6 years</td>
                        <td>Medium to High</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>

    <section class="section-shell calculator-section">
        <div class="calculator-wrap glass-card reveal" data-reveal>
            <div>
                <p class="section-tag">Investment Tool</p>
                <h2>Estimate your potential land value growth.</h2>
                <p class="section-subcopy">Quickly project future value using your budget, expected annual growth, and timeline.</p>
            </div>
            <form id="roiCalculatorForm" class="calculator-form">
                <label>
                    Current Budget (KES)
                    <input type="number" id="calcBudget" min="100000" step="50000" value="1500000" required>
                </label>
                <label>
                    Annual Growth (%)
                    <input type="number" id="calcGrowth" min="1" max="40" step="0.5" value="12" required>
                </label>
                <label>
                    Investment Horizon (years)
                    <input type="number" id="calcYears" min="1" max="30" step="1" value="5" required>
                </label>
                <button type="submit" class="hero-btn hero-btn-primary">Calculate Projection</button>
                <div class="calculator-result" id="calculatorResult">Projected value: KES 2,643,000</div>
            </form>
        </div>
    </section>

    <section class="section-shell guide-section">
        <div class="guide-panel reveal" data-reveal>
            <div>
                <p class="section-tag">Free Guide</p>
                <h2>Get our land due diligence checklist.</h2>
                <p>Receive a concise PDF guide covering title checks, legal steps, site inspection notes, and payment safety tips.</p>
            </div>
            <form id="guideRequestForm" class="guide-request-form">
                <input type="text" name="name" placeholder="Full name" required>
                <input type="email" name="email" placeholder="Email address" required>
                <button type="submit" class="hero-btn hero-btn-primary">Send Guide to My Email</button>
                <p id="guideRequestFeedback" class="guide-feedback"></p>
            </form>
        </div>
    </section>

    <section class="section-shell modern-listings-section" id="properties">
        <div class="section-header reveal" data-reveal>
            <p class="section-tag">Featured Plots</p>
            <h2>Verified land opportunities available now.</h2>
            <p class="section-subcopy">Fresh inventory synced in real-time from the admin dashboard.</p>
        </div>

        <div class="modern-land-grid" id="landGrid">
            {% for p in properties[:3] %}
            <article class="modern-land-card glass-card reveal" data-reveal>
                <div class="modern-land-media">
                    {% if p.get('media') %}
                        {% if p.media is string %}
                            {% if p.media.endswith(('.mp4', '.webm', '.mov')) %}
                            <video muted playsinline loop preload="metadata">
                                <source src="{{ url_for('static', filename='uploads/' ~ p.media) }}">
                            </video>
                            {% else %}
                            <img loading="lazy" src="{{ url_for('static', filename='uploads/' ~ p.media) }}" alt="{{ p.title }}">
                            {% endif %}
                        {% else %}
                            {% set first_media = p.media[0] if p.media else None %}
                            {% if first_media %}
                                {% if first_media.endswith(('.mp4', '.webm', '.mov')) %}
                                <video muted playsinline loop preload="metadata">
                                    <source src="{{ url_for('static', filename='uploads/' ~ first_media) }}">
                                </video>
                                {% else %}
                                <img loading="lazy" src="{{ url_for('static', filename='uploads/' ~ first_media) }}" alt="{{ p.title }}">
                                {% endif %}
                            {% else %}
                            <img loading="lazy" src="{{ url_for('static', filename='images/placeholder.jpg') }}" alt="{{ p.title }}">
                            {% endif %}
                        {% endif %}
                    {% else %}
                    <img loading="lazy" src="{{ url_for('static', filename='images/placeholder.jpg') }}" alt="{{ p.title }}">
                    {% endif %}
                </div>
                <div class="modern-land-body">
                    <h3>{{ p.title }}</h3>
                    <p class="land-location"><i class="fas fa-map-pin"></i> {{ p.location }}</p>
                    <p class="land-excerpt">{{ p.description[:95] if p.description else 'Prime verified land opportunity with high growth potential.' }}...</p>
                    <div class="land-meta">
                        <span>{{ p.area or 'Plot available' }}</span>
                        <strong>KES {{ "{:,}".format(p.price|int) if p.price else 'Contact us' }}</strong>
                    </div>
                    <div class="land-actions">
                        <a href="https://wa.me/254784666927?text=Hello%20I%20am%20interested%20in%20{{ p.title | replace(' ', '%20') }}%20at%20{{ p.location | replace(' ', '%20') }}." target="_blank" rel="noopener noreferrer">WhatsApp</a>
                        <a href="/properties/{{ p._id }}">View Details</a>
                    </div>
                </div>
            </article>
            {% endfor %}
        </div>

        <div class="section-cta reveal" data-reveal>
            <a href="/properties" class="hero-btn hero-btn-primary">Explore All Properties</a>
        </div>
    </section>

    <section class="section-shell modern-stats-section">
        <div class="modern-stats-grid">
            <article class="modern-stat glass-card reveal" data-reveal>
                <h3 data-counter-target="15">15+</h3>
                <p>Properties sold</p>
            </article>
            <article class="modern-stat glass-card reveal" data-reveal data-reveal-delay="90">
                <h3 data-counter-target="20">20+</h3>
                <p>Acres listed</p>
            </article>
            <article class="modern-stat glass-card reveal" data-reveal data-reveal-delay="180">
                <h3 data-counter-target="5000000">KSh 5M+</h3>
                <p>Total property value</p>
            </article>
            <article class="modern-stat glass-card reveal" data-reveal data-reveal-delay="270">
                <h3 data-counter-target="98">98%</h3>
                <p>Client satisfaction</p>
            </article>
        </div>
    </section>

    <section class="section-shell modern-testimonials-section">
        <div class="section-header reveal" data-reveal>
            <p class="section-tag">Client Stories</p>
            <h2>Trusted by families and investors across Kenya.</h2>
        </div>

        <div class="modern-testimonials-wrap">
            <div class="modern-testimonials-track" id="testimonialsTrack">
                {% for t in testimonials %}
                <article class="modern-testimonial-card glass-card">
                    <div class="testimonial-stars">
                        {% for _ in range((t.rating or 5)|int) %}
                        <i class="fas fa-star"></i>
                        {% endfor %}
                    </div>
                    <p class="testimonial-text">"{{ t.testimonial }}"</p>
                    <div class="testimonial-person">
                        <span>{{ t.name[0].upper() if t.name else '?' }}</span>
                        <div>
                            <strong>{{ t.name }}</strong>
                            <small>{{ t.location }}</small>
                        </div>
                    </div>
                </article>
                {% endfor %}
            </div>
        </div>

        {% if testimonials|length > 1 %}
        <div class="testimonials-controls reveal" data-reveal>
            <button type="button" id="testimonialsPrev" aria-label="Previous testimonial"><i class="fas fa-chevron-left"></i></button>
            <p><span id="testimonialsCount">1</span>/<span id="testimonialsTotal">{{ testimonials|length }}</span></p>
            <button type="button" id="testimonialsNext" aria-label="Next testimonial"><i class="fas fa-chevron-right"></i></button>
        </div>
        {% endif %}
    </section>

    <section class="section-shell faq-section">
        <div class="section-header reveal" data-reveal>
            <p class="section-tag">FAQ</p>
            <h2>Answers to common land investment questions.</h2>
        </div>
        <div class="faq-accordion">
            <article class="faq-item reveal" data-reveal>
                <button class="faq-toggle" type="button">How do I verify ownership before purchase?</button>
                <div class="faq-content">We provide due diligence support including title checks, ownership records, and legal verification guidance before commitment.</div>
            </article>
            <article class="faq-item reveal" data-reveal data-reveal-delay="80">
                <button class="faq-toggle" type="button">Can I buy through installments?</button>
                <div class="faq-content">Yes. Selected projects allow staged payments aligned with your timeline. Terms are shared upfront before reservation.</div>
            </article>
            <article class="faq-item reveal" data-reveal data-reveal-delay="160">
                <button class="faq-toggle" type="button">How soon can I book a site visit?</button>
                <div class="faq-content">Most visits can be scheduled within 24 to 72 hours depending on project location and transport availability.</div>
            </article>
            <article class="faq-item reveal" data-reveal data-reveal-delay="240">
                <button class="faq-toggle" type="button">Do you support first-time buyers?</button>
                <div class="faq-content">Absolutely. We provide clear guidance for budgeting, location matching, legal process, and post-purchase planning.</div>
            </article>
        </div>
    </section>

    <section class="section-shell modern-newsletter-section">
        <div class="newsletter-glass reveal" data-reveal>
            <div>
                <p class="section-tag">Newsletter</p>
                <h2>Get curated land investment updates every week.</h2>
                <p>Insights, legal tips, and new property alerts delivered to your inbox.</p>
            </div>
            <div class="newsletter-form-wrap">
                <div id="newsletterSuccess" class="newsletter-alert success-alert" style="display:none;">
                    <i class="fas fa-check-circle"></i>
                    <span id="newsletterSuccessText">Subscription successful. Check your inbox for confirmation.</span>
                </div>
                <div id="newsletterError" class="newsletter-alert error-alert" style="display:none;">
                    <i class="fas fa-exclamation-circle"></i>
                    <span id="newsletterErrorText"></span>
                </div>
                <form id="newsletterForm" class="newsletter-modern-form">
                    <input type="email" name="email" placeholder="Enter email address" required>
                    <button type="submit" class="newsletter-btn">Subscribe</button>
                </form>
                <small>Join 200+ investors already subscribed.</small>
            </div>
        </div>
    </section>
</div>

<div id="consultationModal" class="consult-modal" aria-hidden="true">
    <div class="consult-modal-panel">
        <button class="consult-close" type="button" data-modal-close="consultationModal" aria-label="Close consultation form">
            <i class="fas fa-times"></i>
        </button>
        <h3>Request a Custom Investment Plan</h3>
        <p>Share your budget and timeline. Our advisor will reach out with recommended projects.</p>
        <form id="consultationForm" class="consultation-form">
            <input type="text" name="name" placeholder="Full name" required>
            <input type="email" name="email" placeholder="Email address" required>
            <input type="tel" name="phone" placeholder="Phone number" required>
            <input type="text" name="property" placeholder="Preferred location or property type">
            <textarea name="message" rows="4" placeholder="Tell us your target budget and preferred timeline" required></textarea>
            <button type="submit" class="hero-btn hero-btn-primary">Submit Request</button>
        </form>
        <p id="consultationFeedback" class="consult-feedback"></p>
    </div>
</div>
{% endblock %}

{% block socket_script %}
<script defer src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
{% endblock %}

{% block extra_js %}
<script defer src="{{ url_for('static', filename='js/home-modern.js') }}"></script>
{% endblock %}
