{% extends "base.html" %}

{% block title %}Home | LandVista Properties Limited{% endblock %}
{% block body_class %}home-modern-body{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/home-modern.css') }}?v={{ range(1, 10000) | random }}">
{% endblock %}

{% block content %}
<div class="home-modern">
    <section class="modern-hero" id="top">
        <div class="hero-noise"></div>
        <div class="hero-gradient-orb hero-gradient-orb-a"></div>
        <div class="hero-gradient-orb hero-gradient-orb-b"></div>

        <div class="modern-hero-inner">
            <div class="hero-copy reveal">
                <p class="hero-eyebrow">Verified Land Investments</p>
                <h1>Acquire strategic land opportunities with confidence and speed.</h1>
                <p class="hero-lead">
                    LandVista combines legal due diligence, trusted support, and flexible payment planning so you can invest without uncertainty.
                </p>
                <div class="hero-actions">
                    <a href="/properties" class="hero-btn hero-btn-primary">Browse Available Plots</a>
                    <a href="/contact" class="hero-btn hero-btn-ghost">Talk to an Advisor</a>
                </div>
                <div class="hero-badges">
                    <span><i class="fas fa-shield-alt"></i> Verified Titles</span>
                    <span><i class="fas fa-route"></i> Prime Access Roads</span>
                    <span><i class="fas fa-hand-holding-usd"></i> Flexible Installments</span>
                </div>
            </div>

            <div class="hero-glass-card reveal" data-reveal-delay="120">
                <p class="glass-label">Investment Snapshot</p>
                <h3>Why investors choose LandVista</h3>
                <div class="hero-stats-mini">
                    <div>
                        <strong>98%</strong>
                        <span>Client satisfaction</span>
                    </div>
                    <div>
                        <strong>20+</strong>
                        <span>Acres listed</span>
                    </div>
                    <div>
                        <strong>15+</strong>
                        <span>Properties sold</span>
                    </div>
                </div>
                <p class="hero-note">Built for first-time buyers and serious land investors.</p>
            </div>
        </div>
    </section>

    <section class="section-shell modern-feature-section">
        <div class="section-header reveal">
            <p class="section-tag">Core Value</p>
            <h2>More than listings. A full investment support system.</h2>
        </div>
        <div class="feature-grid">
            <article class="feature-card glass-card reveal">
                <i class="fas fa-file-signature"></i>
                <h3>Legal-First Verification</h3>
                <p>Every property is screened for title authenticity, ownership clarity, and legal readiness before publication.</p>
            </article>
            <article class="feature-card glass-card reveal" data-reveal-delay="100">
                <i class="fas fa-map-marked-alt"></i>
                <h3>Growth-Focused Locations</h3>
                <p>Access emerging corridors with strong infrastructure trends and long-term appreciation potential.</p>
            </article>
            <article class="feature-card glass-card reveal" data-reveal-delay="180">
                <i class="fas fa-user-tie"></i>
                <h3>Dedicated Advisor Support</h3>
                <p>From first inquiry to transfer completion, our team guides each stage of your purchase journey.</p>
            </article>
            <article class="feature-card glass-card reveal" data-reveal-delay="260">
                <i class="fas fa-wallet"></i>
                <h3>Structured Payment Flexibility</h3>
                <p>Choose payment options tailored to your timeline while maintaining clarity on each installment milestone.</p>
            </article>
        </div>
    </section>

    <section class="section-shell modern-process-section">
        <div class="section-header reveal">
            <p class="section-tag">Simple Process</p>
            <h2>How LandVista gets you from interest to ownership.</h2>
        </div>
        <div class="process-grid">
            <div class="process-step reveal">
                <span>01</span>
                <h3>Discover</h3>
                <p>Review verified listings filtered by location, budget, and land use goals.</p>
            </div>
            <div class="process-step reveal" data-reveal-delay="110">
                <span>02</span>
                <h3>Validate</h3>
                <p>Book a site visit and confirm details with our advisory team before commitment.</p>
            </div>
            <div class="process-step reveal" data-reveal-delay="220">
                <span>03</span>
                <h3>Secure</h3>
                <p>Finalize payment and documentation with transparent guidance at each step.</p>
            </div>
            <div class="process-step reveal" data-reveal-delay="330">
                <span>04</span>
                <h3>Own</h3>
                <p>Complete transfer and receive support post-purchase as your investment grows.</p>
            </div>
        </div>
    </section>

    <section class="section-shell modern-listings-section" id="properties">
        <div class="section-header reveal">
            <p class="section-tag">Featured Plots</p>
            <h2>Verified land opportunities available now.</h2>
            <p class="section-subcopy">Fresh inventory synced in real-time from the admin dashboard.</p>
        </div>

        <div class="modern-land-grid" id="landGrid">
            {% for p in properties[:3] %}
            <article class="modern-land-card glass-card reveal">
                <div class="modern-land-media">
                    {% if p.get('media') %}
                        {% if p.media is string %}
                            {% if p.media.endswith(('.mp4', '.webm', '.mov')) %}
                            <video muted playsinline loop>
                                <source src="{{ url_for('static', filename='uploads/' ~ p.media) }}">
                            </video>
                            {% else %}
                            <img src="{{ url_for('static', filename='uploads/' ~ p.media) }}" alt="{{ p.title }}">
                            {% endif %}
                        {% else %}
                            {% set first_media = p.media[0] if p.media else None %}
                            {% if first_media %}
                                {% if first_media.endswith(('.mp4', '.webm', '.mov')) %}
                                <video muted playsinline loop>
                                    <source src="{{ url_for('static', filename='uploads/' ~ first_media) }}">
                                </video>
                                {% else %}
                                <img src="{{ url_for('static', filename='uploads/' ~ first_media) }}" alt="{{ p.title }}">
                                {% endif %}
                            {% else %}
                            <img src="{{ url_for('static', filename='images/placeholder.jpg') }}" alt="{{ p.title }}">
                            {% endif %}
                        {% endif %}
                    {% else %}
                    <img src="{{ url_for('static', filename='images/placeholder.jpg') }}" alt="{{ p.title }}">
                    {% endif %}
                </div>
                <div class="modern-land-body">
                    <h3>{{ p.title }}</h3>
                    <p class="land-location"><i class="fas fa-map-pin"></i> {{ p.location }}</p>
                    <p class="land-excerpt">{{ p.description[:95] if p.description else 'Prime verified land opportunity with high growth potential.' }}...</p>
                    <div class="land-meta">
                        <span>{{ p.area or 'Plot available' }}</span>
                        <strong>KES {{ "{:,}".format(p.price|int) if p.price else 'Contact us' }}</strong>
                    </div>
                    <div class="land-actions">
                        <a href="https://wa.me/254784666927?text=Hello%20I%20am%20interested%20in%20{{ p.title | replace(' ', '%20') }}%20at%20{{ p.location | replace(' ', '%20') }}." target="_blank" rel="noopener noreferrer">WhatsApp</a>
                        <a href="/properties/{{ p._id }}">View Details</a>
                    </div>
                </div>
            </article>
            {% endfor %}
        </div>

        <div class="section-cta reveal">
            <a href="/properties" class="hero-btn hero-btn-primary">Explore All Properties</a>
        </div>
    </section>

    <section class="section-shell modern-stats-section">
        <div class="modern-stats-grid">
            <article class="modern-stat glass-card reveal">
                <h3 data-counter-target="15">15+</h3>
                <p>Properties sold</p>
            </article>
            <article class="modern-stat glass-card reveal" data-reveal-delay="90">
                <h3 data-counter-target="20">20+</h3>
                <p>Acres listed</p>
            </article>
            <article class="modern-stat glass-card reveal" data-reveal-delay="180">
                <h3 data-counter-target="5000000">KSh 5M+</h3>
                <p>Total property value</p>
            </article>
            <article class="modern-stat glass-card reveal" data-reveal-delay="270">
                <h3 data-counter-target="98">98%</h3>
                <p>Client satisfaction</p>
            </article>
        </div>
    </section>

    <section class="section-shell modern-testimonials-section">
        <div class="section-header reveal">
            <p class="section-tag">Client Stories</p>
            <h2>Trusted by families and investors across Kenya.</h2>
        </div>

        <div class="modern-testimonials-wrap">
            <div class="modern-testimonials-track" id="testimonialsTrack">
                {% for t in testimonials %}
                <article class="modern-testimonial-card glass-card">
                    <div class="testimonial-stars">
                        {% for _ in range((t.rating or 5)|int) %}
                        <i class="fas fa-star"></i>
                        {% endfor %}
                    </div>
                    <p class="testimonial-text">"{{ t.testimonial }}"</p>
                    <div class="testimonial-person">
                        <span>{{ t.name[0].upper() if t.name else '?' }}</span>
                        <div>
                            <strong>{{ t.name }}</strong>
                            <small>{{ t.location }}</small>
                        </div>
                    </div>
                </article>
                {% endfor %}
            </div>
        </div>

        {% if testimonials|length > 1 %}
        <div class="testimonials-controls reveal">
            <button type="button" id="testimonialsPrev" aria-label="Previous testimonial"><i class="fas fa-chevron-left"></i></button>
            <p><span id="testimonialsCount">1</span>/<span id="testimonialsTotal">{{ testimonials|length }}</span></p>
            <button type="button" id="testimonialsNext" aria-label="Next testimonial"><i class="fas fa-chevron-right"></i></button>
        </div>
        {% endif %}
    </section>

    <section class="section-shell modern-newsletter-section">
        <div class="newsletter-glass reveal">
            <div>
                <p class="section-tag">Newsletter</p>
                <h2>Get curated land investment updates every week.</h2>
                <p>Insights, legal tips, and new property alerts delivered to your inbox.</p>
            </div>
            <div class="newsletter-form-wrap">
                <div id="newsletterSuccess" class="newsletter-alert success-alert" style="display:none;">
                    <i class="fas fa-check-circle"></i>
                    <span id="newsletterSuccessText">Subscription successful. Check your inbox for confirmation.</span>
                </div>
                <div id="newsletterError" class="newsletter-alert error-alert" style="display:none;">
                    <i class="fas fa-exclamation-circle"></i>
                    <span id="newsletterErrorText"></span>
                </div>
                <form id="newsletterForm" class="newsletter-modern-form">
                    <input type="email" name="email" placeholder="Enter email address" required>
                    <button type="submit" class="newsletter-btn">Subscribe</button>
                </form>
                <small>Join 200+ investors already subscribed.</small>
            </div>
        </div>
    </section>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/home-modern.js') }}?v={{ range(1, 10000) | random }}"></script>
{% endblock %}
